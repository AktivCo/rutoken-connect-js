{"version":3,"file":"index.js","mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAyD;AAC7D;AACA,MAAM,EAKgC;AACtC,CAAC;AACD,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD,mEAAmE,iKAAiK,EAAE,gCAAgC,kHAAkH,EAAE,kCAAkC,kDAAkD,4CAA4C,+DAA+D,GAAG,IAAI,eAAe,oBAAoB,0BAA0B,kFAAkF,4DAA4D,oBAAoB,iBAAiB,wEAAwE,gCAAgC,mEAAmE,yCAAyC,eAAe,6BAA6B,wCAAwC,YAAY,kCAAkC,mEAAmE,yCAAyC,eAAe,4BAA4B,qDAAqD,YAAY,OAAO,EAAE,sCAAsC,2LAA2L,qBAAqB,WAAW,oBAAoB,oBAAoB,qBAAqB,qFAAqF,iCAAiC,YAAY,MAAM,mEAAmE,UAAU,IAAI,WAAW,QAAQ,sDAAsD,kGAAkG,yBAAyB,wBAAwB,uGAAuG,mCAAmC,OAAO,+CAA+C,iKAAiK,0CAA0C,WAAW,OAAO,qBAAqB,gJAAgJ,gCAAgC,6CAA6C,uEAAuE,qCAAqC,mBAAmB,eAAe,QAAQ,YAAY,MAAM,0CAA0C,WAAW,OAAO,cAAc,wDAAwD,4BAA4B,WAAW,+BAA+B,OAAO,EAAE,GAAG;;AAEtpG,OAAO;;AAEP,WAAW;AACX;AACA;AACA,cAAc,+BAAmB;AACjC;AACA;AACA;AACA;AACA;AACA,WAAW,+BAAmB;AAC9B;AACA,gBAAgB,+BAAmB,wBAAwB,+BAAmB;AAC9E,oDAAoD,wCAAwC;AAC5F;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW,+BAAmB;AAC9B,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW,+BAAmB;AAC9B;AACA,kEAAkE,iBAAiB;AACnF;AACA,2DAA2D,aAAa;AACxE;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,+BAAmB;AAC3F;AACA;AACA,UAAU;AACV;AACA,CAAC;;;;;;UC7ED;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACNsD;;AAEtD;AACA;AACA;AACA;AACA,SAAS,IAAI,YAAY;AACzB,MAAM;AACN;AACA;AACA;;AAEA,+DAAmB;AACnB;AACA;AACA;AACA,aAAa,kEAAsB;AACnC;AACA;AACA,aAAa,wEAA4B;AACzC;AACA;AACA,aAAa,qEAAyB;AACtC;AACA;AACA,aAAa,sEAA0B;AACvC;AACA;AACA,aAAa,yEAA6B;AAC1C;AACA;AACA,aAAa,kEAAsB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK","sources":["webpack://rutoken-connect-example/./node_modules/@aktivco/rutoken-connect/dist/rtconnect.umd.js","webpack://rutoken-connect-example/webpack/bootstrap","webpack://rutoken-connect-example/webpack/runtime/compat get default export","webpack://rutoken-connect-example/webpack/runtime/define property getters","webpack://rutoken-connect-example/webpack/runtime/hasOwnProperty shorthand","webpack://rutoken-connect-example/webpack/runtime/make namespace object","webpack://rutoken-connect-example/./src/index.js"],"sourcesContent":["/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rutoken-connect\"] = factory();\n\telse\n\t\troot[\"rutoken-connect\"] = factory();\n})(self, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/index.js\":\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"Status\\\": () => (/* binding */ Status),\\n/* harmony export */   \\\"getStatus\\\": () => (/* binding */ getStatus)\\n/* harmony export */ });\\nconst Status = Object.freeze({\\n    noExtension: -1,\\n    ready: 0,\\n    noNative: 1,\\n    oldExtension: 2,\\n    oldNative: 3,\\n    error: 4,\\n});\\nconst lastStatus = Status.error;\\n\\nconst isFirefox = (function checkIsFirefox() {\\n    const ua = window.navigator.userAgent;\\n    return !!ua.match(/firefox/i) && !ua.match(/seamonkey/i);\\n}());\\n\\nlet status;\\nlet statusPromise;\\n\\nfunction getStatus() {\\n    if (status !== undefined && status !== null) return Promise.resolve(status);\\n    if (statusPromise !== undefined) return statusPromise;\\n\\n    let resolve;\\n    let reject;\\n    statusPromise = new Promise((resolveCallback, rejectCallback) => {\\n        resolve = (value) => {\\n            if (statusPromise !== undefined && status !== null) {\\n                resolveCallback(value);\\n            }\\n            status = value;\\n            statusPromise = undefined;\\n        };\\n\\n        reject = (reason) => {\\n            if (statusPromise !== undefined && status !== null) {\\n                rejectCallback(reason);\\n            }\\n            status = null;\\n            statusPromise = Promise.reject(reason);\\n        };\\n    });\\n\\n    const onMessage = (event) => {\\n        if (event.source !== window || event.data === undefined || event.data.rutoken === undefined\\n            || event.data.rutoken.uuid !== 'EE4F9C58-64D8-4FCD-AB45-0E3040EEB37D') {\\n            return;\\n        }\\n\\n        const { status: newStatus } = event.data.rutoken;\\n        if (newStatus !== undefined && newStatus >= 0 && newStatus <= lastStatus) {\\n            resolve(newStatus);\\n        } else {\\n            reject(new Error(`Couldn't parse extension status: ${newStatus}`));\\n        }\\n    };\\n\\n    window.addEventListener('message', onMessage);\\n\\n    let url = 'chrome-extension://acbchkahfmndkenefkcklofjmipghjjp/check_rtconnect_extension';\\n    const options = {};\\n\\n    if (isFirefox) {\\n        url = 'https://qbwjg564lyt1tdfo23xz5l3udvdfe0ux.rutoken.ru/api/v1/check_rtconnect_extension';\\n        options.mode = 'no-cors';\\n    }\\n\\n    return fetch(url, options).then(() => {\\n        // request in firefox is not canceled - no extension\\n        // request in chrome is successful - extension will send status\\n        if (isFirefox) {\\n            resolve(Status.noExtension);\\n        }\\n    }).catch((reason) => {\\n        // request in firefox is canceled - extension is present\\n        // request in chrome failed - no extension\\n        if (isFirefox) {\\n            setTimeout(() => {\\n                if (status === undefined) {\\n                    window.removeEventListener('message', onMessage);\\n                    reject(reason);\\n                }\\n            }, 2000);\\n        } else {\\n            resolve(Status.noExtension);\\n        }\\n    }).then(() => {\\n        if (status !== undefined && status !== null) {\\n            return status;\\n        }\\n        return statusPromise;\\n    });\\n}\\n\\n\\n\\n\\n//# sourceURL=webpack://rutoken-connect/./src/index.js?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The require scope\n/******/ \tvar __webpack_require__ = {};\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module can't be inlined because the eval devtool is used.\n/******/ \tvar __webpack_exports__ = {};\n/******/ \t__webpack_modules__[\"./src/index.js\"](0, __webpack_exports__, __webpack_require__);\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import * as rtconnect from '@aktivco/rutoken-connect';\n\nfunction setStatus(message) {\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', () => {\n            document.getElementById('status').textContent = message;\n        }, { once: true });\n    } else {\n        document.getElementById('status').textContent = message;\n    }\n}\n\nrtconnect.getStatus()\n    .then((status) => {\n        let message = '';\n        switch (status) {\n        case rtconnect.Status.ready:\n            message = 'Готово к работе';\n            break;\n        case rtconnect.Status.noExtension:\n            message = 'Расширение не установлено';\n            break;\n        case rtconnect.Status.noNative:\n            message = 'Приложение не установлено';\n            break;\n        case rtconnect.Status.oldNative:\n            message = 'Приложение необходимо обновить';\n            break;\n        case rtconnect.Status.oldExtension:\n            message = 'Расширение необходимо обновить';\n            break;\n        case rtconnect.Status.error:\n            message = 'Произошла ошибка, обратитесь в техническую поддержку';\n            break;\n        default:\n            throw status;\n        }\n        setStatus(message);\n    })\n    .catch((error) => {\n        const message = 'Неизвестен';\n        console.warn(error);\n        setStatus(message);\n    });\n"],"names":[],"sourceRoot":""}